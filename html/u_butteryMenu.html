<!DOCTYPE html>
<html lang="en">

<head>
    <title>{{ buttery }} Menu</title>
    <!-- Added viewport meta for responsive design -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <!-- Navigation header -->
    <div class="header">
        <a href="/u_butteries">Butteries</a>
        <a href="/u_ordersIP">Orders in Progress</a>
        <a href="/u_cart">Cart</a>
        <a href="/u_account">Account</a>
    </div>
    <br>

    <h1>{{ buttery }}</h1>
    <!-- Added opening hours display -->
    {% if opening_hours %}
        <p>Opening Hours: {{ opening_hours }}</p>
    {% endif %}

    <!-- Added empty state handling -->
    {% if not menuItems %}
        <p>No menu items available at this time.</p>
    {% else %}
        <!-- Group menu items by category -->
        {% for category, items in menuItems|groupby('category') %}
            <h2>{{ category }}</h2>
            <div class="menu-category">
                {% for item in items %}
                    <!-- Only show available items -->
                    {% if item.is_available %}
                        <div class="menu-item">
                            <h3>{{ item.item_name }}</h3>
                            <!-- Added description display -->
                            {% if item.description %}
                                <p>{{ item.description }}</p>
                            {% endif %}
                            <!-- Added price formatting -->
                            <p>Price: ${{ "%.2f"|format(item.price) }}</p>
                            <form action="u_display_item" method="get">
                                <!-- Changed to use item ID instead of name -->
                                <input type="hidden" name="menu_item" value="{{ item.item_name }}">
                                <input type="hidden" name="buttery" value="{{ buttery }}">
                                <button type="submit">View Details</button>
                            </form>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        {% endfor %}
    {% endif %}
</body>

</html>